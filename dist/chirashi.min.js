/*!
 * Chirashi.js v5.0.0
 * (c) 2016 Alex Toudic
 * Released under the MIT License.
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Chirashi=t()}(this,function(){"use strict";function n(n,t){var e=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if(n){if(n instanceof Array||n instanceof window.NodeList||n instanceof window.HTMLCollection)if(e)for(var r=-1,i=n.length;++r<i;)t(n[r],r);else for(var o=n.length;o--;)t(n[o],o);else t(n,0);return n}}function t(n){return n instanceof window.HTMLElement||n===window||n===document||n instanceof window.SVGElement||n instanceof window.Text}function e(r){if(r["_chrsh-valid"])return r;var i=void 0;return"string"==typeof r?i=[].concat(Zn(document.querySelectorAll(r))):r instanceof Array?!function(){var t=[];n(r,function(n){t.push.apply(t,Zn(e(n)))}),i=t}():i=r instanceof window.NodeList?[].concat(Zn(r)):t(r)?[r]:[],"_chrsh-valid"in i||(i.chrshPush=function(n){return this.push.apply(this,Zn(e(n)))},n(Vn,function(n){i[n]=function(){return this["_chrsh-valid"]=!1,Array.prototype[n].apply(this,arguments)}})),i["_chrsh-valid"]=!0,i}function r(t,r){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];return n(e(t),r,i)}function i(t,e){var r=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if("object"===("undefined"==typeof t?"undefined":Bn(t)))return n(Object.keys(t),function(n){return e(n,t[n])},r),t}function o(n){return"string"==typeof n?document.querySelector(n):n instanceof Array?o(n[0]):t(n)&&n}function a(n,t){return"string"==typeof t&&(t=t.split(/[,\s]+/g)),r(n,function(n){var e;n.classList&&(e=n.classList).add.apply(e,Zn(t))})}function s(n,t){return i(t,function(n,e){e instanceof Array?t[n]=e.join(" "):"string"!=typeof e&&(t[n]=JSON.stringify(e))}),r(n,function(n){n.setAttribute&&i(t,n.setAttribute.bind(n))})}function c(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(t.indexOf("<")===-1){var r=null;n(t.match(/[#\.\[]?[a-zA-Z0-9-="'#]+[\]]?/g),function(n){0===n.indexOf(".")?"class"in e?e["class"]instanceof Array?(e["class"]=e["class"].join(" "),e["class"]+=" "+n.slice(1)):e["class"]+=" "+n.slice(1):e["class"]=n.slice(1):0===n.indexOf("#")?e.id=n.slice(1):0===n.indexOf("[")?(n=n.replace(/[\[\]]/g,"").split("="),e[n[0]]=n.length>1?n[1].slice(1,-1):""):r=n}),null===r&&(r="div"),t="<"+r+"></"+r+">"}var i=document.createElement("div");i.innerHTML=t;var o=i.firstChild;return s(o,e),o}function u(e,r){var i=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];if(e=o(e),e&&e.appendChild){var a=0,s=i.length;return n(r,function(n,r){"string"==typeof n&&(n=c(n,a<s&&i[a++]||{})),t(n)&&e.appendChild(n)},!0),e}}function l(n){return n=o(n),!!n&&"children"in n&&[].concat(Zn(n.children))}function f(n){return n=o(n),!!n&&n.cloneNode(!0)}function d(n,t){var e=arguments.length<=2||void 0===arguments[2]?document:arguments[2];return n=o(n),!(!n||("string"==typeof e?n.matches(e):n===e))&&(("string"==typeof t?n.matches(t):n===t)?n:!!n.parentNode&&d(n.parentNode,t,e))}function h(n,t){return e(n).filter(function(n){return"string"==typeof t&&"matches"in n&&n.matches(t)||n===t})}function v(n,t){var e=[];return r(n,function(n){e.push.apply(e,Zn(n.querySelectorAll(t)))}),e}function p(n,t){return n=o(n),n&&"querySelector"in n?n.querySelector(t):null}function m(n,t){return n=o(n),n&&"getAttribute"in n?n.getAttribute(t):null}function g(n,t){return m(n,"data-"+t)}function y(n){return n=o(n),n?n.innerHTML:null}function b(n,t){return n=o(n),!!n&&n[t]}function w(n,t){if(n=o(n),n&&n.classList){"string"==typeof t&&(t=t.split(/[\s,]+/g));for(var e=t.length,r=void 0;e--&&(r=n.classList.contains(t[e])););return r}}function x(n){if(n=o(n),!n)return null;for(var t=n,e=0;t=t.previousElementSibling;)++e;return e}function k(e,r){var i=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];if(e=o(e),e&&"parentNode"in e&&"insertBefore"in e.parentNode){var a=e.parentNode,s=0,u=i.length;return n(r,function(n,r){"string"==typeof n&&(n=c(n,s<u&&i[s++]||{})),t(n)&&a.insertBefore(n,e.nextElementSibling)},!0),e}}function M(e,r){var i=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];if(e=o(e),e&&"parentNode"in e&&"insertBefore"in e.parentNode){var a=e.parentNode,s=0,u=i.length;return n(r,function(n,r){"string"==typeof n&&(n=c(n,s<u&&i[s++]||{})),t(n)&&a.insertBefore(n,e)},!0),e}}function A(n){if(n=o(n))return n.nextElementSibling}function E(n){return n=o(n),!!n&&n.parentNode}function L(n){return n=o(n),!!n&&n.previousElementSibling}function S(n){return r(n,function(n){n.parentNode&&n.parentNode.removeChild(n)})}function C(n,t){return"string"==typeof t&&(t=t.split(/[,\s]+/g)),r(n,function(n){var e;n.classList&&(e=n.classList).remove.apply(e,Zn(t))})}function D(n,t){var e={};i(t,function(n,t){e["data-"+n]=t}),s(n,e)}function T(n,t){return r(n,function(n){n.innerHTML=t})}function O(n,t){return r(n,function(n){return Object.assign(n,t)})}function N(n,t){return"string"==typeof t&&(t=t.split(/[,\s]+/g)),r(n,function(n){var e;n.classList&&(e=n.classList).toggle.apply(e,Zn(t))})}function X(t,e){return r(t,function(t){t.addEventListener&&i(e,function(e,r){n(e.split(/[,\s]+/g),function(n){return t.addEventListener(n,r)})})})}function Y(t,e){return r(t,function(t){t.addEventListener&&i(e,function(e,r){n(e.split(/[,\s]+/g),function(n){return t.removeEventListener(n,r)})})})}function j(n,t){var e=arguments.length<=2||void 0===arguments[2]?document.body:arguments[2],r={};return i(t,function(t,i){r[t]=function(t){var r=d(t.target,n,e);r&&i(t,r)}}),X(e,r),{unbind:function(){Y(e,r)}}}function z(t,e,i,o){var a=[];return r(t,function(n){var t=!1,r={element:n,begin:function(n){n.preventDefault(),n.stopPropagation(),"touches"in n&&n.touches.length&&(n=n.touches[0]),t=!0,i&&i({x:n.pageX,y:n.pageY})},move:function(n){t&&(n.preventDefault(),n.stopPropagation(),"touches"in n&&n.touches.length&&(n=n.touches[0]),e&&e({x:n.pageX,y:n.pageY}))},end:function(n){t&&(n.preventDefault(),n.stopPropagation(),"touches"in n&&n.touches.length&&(n=n.touches[0]),t=!1,o&&o({x:n.pageX,y:n.pageY}))}};X(n,"touchstart mousedown",r.begin),X(document.body,"touchmove mousemove",r.move),X(document.body,"touchend mouseup",r.end),a.push(r)}),{off:function(){n(a,function(n){Y(n.element,"touchstart, mousedown",n.begin),Y(document.body,"touchmove, mousemove",n.move),Y(document.body,"touchend, mouseup",n.end)})}}}function P(n,t,e){var r={mouseenter:t,mouseleave:e};return X(n,r),{off:function(){Y(n,r)}}}function H(t,r,i){var o=arguments.length<=3||void 0===arguments[3]||arguments[3],a=arguments.length<=4||void 0===arguments[4]||arguments[4];if(t=e(t),!t||0===t.length)return void(i&&i());var s={value:t.length},c=function u(n,t,e){n&&(t=n.target,"error"===n.type&&(e=n)),o&&Y(t,"load loadedmetadata error",u),r&&r(t,e),!--s.value&&i&&i()};return n(t,function(n){a&&!n.src?c(null,n,"image without src"):n.naturalWidth||n.loadedmetadata?c(null,n,null):X(n,"load loadedmetadata error",c)}),{off:function(){n(t,function(n){return Y(n,"load loadedmetadata error",c)})}}}function I(n,t,e){var r=function i(r){e(r),Y(n,t,i)};return X(n,t,r),{cancel:function(){Y(n,t,r)}}}function B(n){X(document,{DOMContentLoaded:n})}function W(t,r){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(t=e(t),t.length)return i=Wn({},i,Jn),"string"==typeof r&&(r=r.split(/[,\s]+/g)),n(r,function(e){e=new window.CustomEvent(e,i),n(t,function(n){n.dispatchEvent&&n.dispatchEvent(e)})}),t}function Z(n){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return n=o(n),!!n&&(t?n.clientHeight:n.offsetHeight)}function q(n){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return n=o(n),!!n&&(t?n.clientWidth:n.offsetWidth)}function R(n){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return!!n&&{width:q(n,t),height:Z(n,t)}}function _(n,t){if(n=o(n)){var e=window.getComputedStyle(n)[t];return e.indexOf("px")===-1?e:+e}}function V(n,t){return i(t,function(n,e){Un.indexOf(n)===-1&&"number"==typeof e&&(t[n]+="px")}),r(n,function(n){n.style&&Object.assign(n.style,t)})}function J(n){return V(n,{visibility:"hidden"})}function U(n,t,e){switch(n){case"x":e[4]+=t;break;case"y":e[5]+=t;break;case"rotate":var r=Math.cos(t),i=Math.sin(t);e[0]*=r,e[1]+=i,e[2]-=i,e[3]*=r;break;case"scale":e[0]*=t,e[2]*=t;break;case"scaleX":e[0]*=t;break;case"scaleY":e[3]*=t;break;case"skew":var o=Math.tan(t);e[2]+=o,e[1]+=o;break;case"skewX":e[2]+=Math.tan(t);break;case"skewY":e[1]+=Math.tan(t)}}function F(n){var t=[1,0,0,1,0,0];return i(n,function(n,e){"object"===("undefined"==typeof e?"undefined":Bn(e))?i(e,function(e,r){U(n+e.toUpperCase(),r,t)}):U(n,e,t)}),t}function G(n,t){var e=F(t);return e="matrix("+e.join(",")+")",r(n,function(n){n.style&&(n.style[qn+"transform"]=e)})}function K(n,t,e){switch(n){case"x":e[12]+=t;break;case"y":e[13]+=t;break;case"z":e[14]+=t;break;case"rotate":var r=Math.cos(t),i=Math.sin(t);e[0]*=r,e[1]+=i,e[4]-=i,e[5]*=r;break;case"rotateX":var o=Math.cos(t),a=Math.sin(t);e[5]*=o,e[6]+=a,e[9]-=a,e[10]*=o;break;case"rotateY":var s=Math.cos(t),c=Math.sin(t);e[0]*=s,e[2]-=c,e[8]+=c,e[10]*=s;break;case"rotateZ":var u=Math.cos(t),l=Math.sin(t);e[0]*=u,e[1]+=l,e[4]-=l,e[5]*=u;break;case"scale":e[0]*=t,e[5]*=t;break;case"scaleX":e[0]*=t;break;case"scaleY":e[5]*=t;break;case"scaleZ":e[10]*=t;break;case"skew":var f=Math.tan(t);e[4]+=f,e[1]+=f;break;case"skewX":e[4]+=Math.tan(t);break;case"skewY":e[1]+=Math.tan(t)}}function Q(n){var t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return i(n,function(n,e){"object"===("undefined"==typeof e?"undefined":Bn(e))?i(e,function(e,r){K(n+e.toUpperCase(),r,t)}):K(n,e,t)}),t}function $(n,t){var e=Q(t);return e="matrix3D("+e.join(",")+")",r(n,function(n){n.style&&(n.style[qn+"transform"]=e)})}function nn(n,t){return _n?$(n,t):G(n,t)}function tn(n){if(n=o(n),!n)return!1;var t=n.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX}}function en(n){return n=o(n),!!n&&{top:n.offsetTop,left:n.offsetLeft}}function rn(n,t,e){var i=void 0;i="scaleX"in t?t.scaleX:"scale"in t?"x"in t.scale?t.scale.x:t.scale:1;var o=void 0;o="scaleY"in t?t.scaleY:"scale"in t?"y"in t.scale?t.scale.y:t.scale:1;var a="scale("+i+","+o+")";return r(n,function(n){n.style&&(e?n.style[qn+"transform"]+=" "+a:n.style[qn+"transform"]=a)})}function on(n,t,e){var i=void 0;i="scaleX"in t?t.scaleX:"scale"in t?"x"in t.scale?t.scale.x:t.scale:1;var o=void 0;o="scaleY"in t?t.scaleY:"scale"in t?"y"in t.scale?t.scale.y:t.scale:1;var a=void 0;a="scaleZ"in t?t.scaleZ:"scale"in t&&"z"in t.scale?t.scale.z:1;var s="scale3D("+i+","+o+","+a+")";return r(n,function(n){n.style&&(e?n.style[qn+"transform"]+=" "+s:n.style[qn+"transform"]=s)})}function an(n,t,e){return _n?on(n,t,e):rn(n,t,e)}function sn(n){return n=o(n),!!n&&n.getBoundingClientRect()}function cn(n,t){return V(n,{height:t})}function un(n,t,e){return V(n,{width:t,height:e})}function ln(n,t){return V(n,{width:t})}function fn(n){return V(n,{visibility:"hidden"})}function dn(n,t,e){var i="x"in t?t.x:0,o="y"in t?t.y:0;"number"==typeof i&&(i+="px"),"number"==typeof o&&(o+="px");var a="translate("+i+","+o+")";return r(n,function(n){n.style&&(e?(n.style[qn+"transform"]+=" "+a,n.style.transform+=" "+a):(n.style[qn+"transform"]=a,n.style.transform=a))})}function hn(n,t,e){var i="x"in t?t.x:0,o="y"in t?t.y:0,a="z"in t?t.z:0;"number"==typeof i&&(i+="px"),"number"==typeof o&&(o+="px"),"number"==typeof a&&(a+="px");var s="translate3D("+i+","+o+","+a+")";return r(n,function(n){n.style&&(e?(n.style[qn+"transform"]+=" "+s,n.style.transform+=" "+s):(n.style[qn+"transform"]=s,n.style.transform=s))})}function vn(n,t,e){return _n?hn(n,t,e):dn(n,t,e)}function pn(n,t){if("skew"in t||"skewX"in t||"skewY"in t||"rotate"in t||"rotateX"in t||"rotateY"in t||"rotateZ"in t)return nn(n,t);var e=!1;return(e="x"in t||"y"in t||"z"in t)?vn(n,t):"scale"in t||"scaleX"in t||"scaleY"in t||"scaleZ"in t?an(n,t,e):void 0}function mn(n){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],e=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return isNaN(n)?e:Math.min(Math.max(n,t),e)}function gn(n,t){var e=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],r=e,i=void 0,o=function(o){r=!1,n.apply(void 0,Zn(o)),i=setTimeout(function(){return r=e},t)},a=function s(){for(var n=arguments.length,e=Array(n),a=0;a<n;a++)e[a]=arguments[a];clearTimeout(i),r?o(e):i=setTimeout(o.bind(null,e),t),s.cancel=function(){clearTimeout(i),r=!0,i=null}};return a}function yn(n){var t=arguments,e=this,r={};return function(){var i=JSON.stringify(t);return i in r?r[i]:r[i]=n.call.apply(n,[e].concat(Array.prototype.slice.call(t)))}}function bn(n){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return Math.random()*(n-t+1)+t}function wn(n){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return~~(Math.random()*(n-t+1))+t}function xn(n,t){var e=arguments.length<=2||void 0===arguments[2]||arguments[2],r=arguments.length<=3||void 0===arguments[3]||arguments[3],i=0,o=void 0,a=function(t){o=null,i=e?window.performance.now():0,n.apply(void 0,Zn(t))},s=function c(){for(var n=arguments.length,s=Array(n),u=0;u<n;u++)s[u]=arguments[u];var l=window.performance.now();i||e||(i=l);var f=t-(l-i);f<0||f>t?a(s):r&&!o&&(o=setTimeout(a.bind(null,s),f)),c.cancel=function(){clearTimeout(o),i=0,o=null}};return s}var kn=navigator&&navigator.userAgent.toLowerCase(),Mn=/android/i.test(kn),An=Mn&&!/mobile/i.test(kn),En=navigator&&navigator.vendor&&navigator.vendor.toLowerCase(),Ln=/chrome|chromium/i.test(kn)&&/google inc/.test(En),Sn=/firefox/i.test(kn),Cn=kn.indexOf("msie")!==-1&&+kn.split("msie")[1],Dn=/iphone|ipad|ipod/i.test(kn),Tn=/ipad/i.test(kn),On=/iphone/i.test(kn),Nn=/ipod/i.test(kn),Xn=/win/i.test("navigator"in window&&"appVersion"in window.navigator&&window.navigator.appVersion.toLowerCase()||""),Yn=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),jn=Dn||Mn||Xn&&Yn,zn=/safari/i.test(kn)&&/apple computer/.test(En),Pn=Xn&&/phone/i.test(kn),Hn=Xn&&!Pn&&Yn,In=Tn||An||Hn,Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n},Wn=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Zn=function(n){if(Array.isArray(n)){for(var t=0,e=Array(n.length);t<n.length;t++)e[t]=n[t];return e}return Array.from(n)},qn=([].concat(Zn(window.getComputedStyle(document.documentElement,""))).join("").match(/-(moz|webkit|ms)-/)||""===window.styles.OLink&&["","o"])[1],Rn=qn+"Transform";document.documentElement.style[Rn]="matrix3D(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)";var _n=!!document.documentElement.style[Rn];document.documentElement.style[Rn]="";var Vn=["push","splice","unshift"],Jn={bubbles:!0,cancelable:!0},Un=["zIndex","z-index","zoom","font-weight","lineHeight","line-height","counterReset","counter-reset","counterIncrement","counter-increment","volume","stress","pitchRange","pitch-range","richness","opacity"],Fn={isAndroid:Mn,isAndroidTablet:An,isChrome:Ln,isFirefox:Sn,isIE:Cn,isIOS:Dn,isIPad:Tn,isIPhone:On,isIPod:Nn,isMobile:jn,isSafari:zn,isTablet:In,isTouchable:Yn,isWindows:Xn,isWindowsPhone:Pn,isWindowsTablet:Hn,prefix:qn,support3D:_n,ua:kn,vendor:En,forEach:n,forElements:r,forIn:i,getElement:o,getElements:e,isDomElement:t,addClass:a,append:u,children:l,clone:f,closest:d,createElement:c,filter:h,find:v,findOne:p,getAttr:m,getData:g,getHtml:y,getProp:b,hasClass:w,indexInParent:x,insertAfter:k,insertBefore:M,next:A,parent:E,prev:L,remove:S,removeClass:C,setAttr:s,setData:D,setHtml:T,setProp:O,toggleClass:N,bind:j,drag:z,hover:P,load:H,off:Y,on:X,once:I,ready:B,trigger:W,getHeight:Z,getSize:R,getStyle:_,getWidth:q,hide:J,matrix:nn,matrix2D:G,matrix3D:$,offset:tn,position:en,scale:an,scale2D:rn,scale3D:on,screenPosition:sn,setHeight:cn,setSize:un,setStyle:V,setWidth:ln,show:fn,transform:pn,translate:vn,translate2D:dn,translate3D:hn,clamp:mn,debounce:gn,memoize:yn,randomBetween:bn,randomIntBetween:wn,throttle:xn,transformTo2DMatrix:F,transformTo3DMatrix:Q};return Fn});