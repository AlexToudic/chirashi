/*!
 * Chirashi.js v5.0.0
 * (c) 2016 Alex Toudic
 * Released under the MIT License.
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Chirashi=t()}(this,function(){"use strict";function n(n,t){return new RegExp("/"+n+"/i").test(On)&&(!t||new RegExp("/"+t+"/").test(Mn))}function t(n,t){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n)return[];if(n instanceof Array||n instanceof window.NodeList||n instanceof window.HTMLCollection||(n=[n]),e)for(var r=-1,i=n.length;++r<i;)t(n[r],r);else for(var o=n.length;o--;)t(n[o],o);return n}function e(n){return n instanceof window.HTMLElement||n===window||n===document||n instanceof window.SVGElement||n instanceof window.Text}function r(n){if(n&&n["_chrsh-valid"])return n;var i=void 0;return"string"==typeof n?i=[].concat(Gn(document.querySelectorAll(n))):n instanceof Array?!function(){var e=[];t(n,function(n){e.push.apply(e,Gn(r(n)))}),i=e}():i=n instanceof window.NodeList?[].concat(Gn(n)):e(n)?[n]:[],"_chrsh-valid"in i||(i.chrshPush=function(n){return this.push.apply(this,Gn(r(n))),this["_chrsh-valid"]=!0,this},t(nt,function(n){i[n]=function(){return this["_chrsh-valid"]=!1,Array.prototype[n].apply(this,arguments)}})),i["_chrsh-valid"]=!0,i}function i(n,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t(r(n),e,i)}function o(n,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("object"===("undefined"==typeof n?"undefined":Vn(n)))return t(Object.keys(n),function(t){return e(t,n[t])},r),n}function a(n){return"string"==typeof n?document.querySelector(n):n instanceof Array?a(n[0]):e(n)&&n}function u(n){return"string"==typeof n?n.split(/[,\s]+/g):n}function c(n,t,e){return e=u(e),i(n,function(n){var r;n.classList[t]&&(r=n.classList)[t].apply(r,Gn(e))})}function s(n,t){return c(n,"add",t)}function f(n,e,r){return i(n,function(n){n[e]&&t(r,n[e].bind(n))})}function l(n,t){return o(t,function(n,e){e instanceof Array?t[n]=e.join(" "):"string"!=typeof e&&(t[n]=JSON.stringify(e))}),f(n,"setAttribute",t)}function d(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.indexOf("<")===-1){var r=null;t(n.match(/[#\.\[]?[a-zA-Z0-9-="'#]+[\]]?/g),function(n){0===n.indexOf(".")?"class"in e?e["class"]instanceof Array?(e["class"]=e["class"].join(" "),e["class"]+=" "+n.slice(1)):e["class"]+=" "+n.slice(1):e["class"]=n.slice(1):0===n.indexOf("#")?e.id=n.slice(1):0===n.indexOf("[")?(n=n.replace(/[\[\]]/g,"").split("="),e[n[0]]=n.length>1?n[1].slice(1,-1):""):r=n}),null===r&&(r="div"),n="<"+r+"></"+r+">"}var i=document.createElement("div");i.innerHTML=n;var o=i.firstChild;return l(o,e),o}function v(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n=a(n),n&&n.appendChild){var o=0;return t(r,function(t,r){"string"==typeof t&&(t=d(t,i[o++]||{})),e(t)&&n.appendChild(t)},!0),n}}function p(n,t){return n=a(n),!!n&&n[t]}function h(n){var t=p(n,"children");return!!t&&[].concat(Gn(t))}function g(n){return n=a(n),!!n&&n.cloneNode(!0)}function m(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;return n=a(n),!(!n||("string"==typeof e?n.matches(e):n===e))&&(("string"==typeof t?n.matches(t):n===t)?n:!!n.parentNode&&m(n.parentNode,t,e))}function y(n,t){return r(n).filter(function(n){return"string"==typeof t&&"matches"in n&&n.matches(t)||n===t})}function w(n,t){var e=[];return i(n,function(n){e.push.apply(e,Gn(n.querySelectorAll(t)))}),e}function b(n,t){return n=a(n),n&&"querySelector"in n?n.querySelector(t):null}function x(n,t){return n=a(n),n&&"getAttribute"in n?n.getAttribute(t):null}function k(n,t){return x(n,"data-"+t)}function S(n){return p(n,"innerHTML")}function A(n,t){if(n=a(n),n&&n.classList){t=u(t);for(var e=t.length,r=void 0;e--&&(r=n.classList.contains(t[e])););return r}}function E(n){if(n=a(n),!n)return null;for(var t=n,e=0;t=t.previousElementSibling;)++e;return e}function L(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n=a(n),n&&"parentNode"in n&&"insertBefore"in n.parentNode){var o=n.parentNode,u=0;return t(r,function(t,r){"string"==typeof t&&(t=d(t,i[u++]||{})),e(t)&&o.insertBefore(t,n.nextElementSibling)},!0),n}}function C(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n=a(n),n&&"parentNode"in n&&"insertBefore"in n.parentNode){var o=n.parentNode,u=0;return t(r,function(t,r){"string"==typeof t&&(t=d(t,i[u++]||{})),e(t)&&o.insertBefore(t,n)},!0),n}}function T(n){return p(n,"nextElementSibling")}function O(n){return p(n,"parentNode")}function M(n){return p(n,"previousElementSibling")}function N(n){return i(n,function(n){n.parentNode&&n.parentNode.removeChild(n)})}function j(n,t){return"string"==typeof t&&(t=t.split(/[,\s]+/g)),f(n,"removeAttribute",t)}function z(n,t){return c(n,"remove",t)}function P(n,t){var e={};o(t,function(n,t){e["data-"+n]=t}),l(n,e)}function H(n,t){return i(n,function(n){return Object.assign(n,t)})}function I(n,t){return H(n,{innerHTML:t})}function X(n,e){return"object"===("undefined"==typeof e?"undefined":Vn(e))?i(n,function(n){n.classList.toggle&&o(e,function(t,e){n.classList.toggle(t,e(n))})}):(e=u(e),i(n,function(n){n.classList.toggle&&t(e,n.classList.toggle.bind(n.classList))}))}function Y(n,e,r){return e+="EventListener",i(n,function(n){n[e]&&o(r,function(r,i){t(u(r),function(t){return n[e](t,i)})})})}function B(n,t){return Y(n,"add",t)}function _(n,t){return Y(n,"remove",t)}function W(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body,r={};return o(t,function(t,i){r[t]=function(t){var r=m(t.target,n,e);r&&i(t,r)}}),B(e,r),{unbind:function(){_(e,r)}}}function Z(n,t,e){var r={mouseenter:t,mouseleave:e};return B(n,r),{off:function(){_(n,r)}}}function D(n,e,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(n=r(n),!n||0===n.length)return void(i&&i());var u={value:n.length},c=function s(n,t,r){n&&(t=n.target,"error"===n.type&&(r=n)),o&&_(t,"load loadedmetadata error",s),e&&e(t,r),!--u.value&&i&&i()};return t(n,function(n){a&&!n.src?c(null,n,"image without src"):n.naturalWidth||n.loadedmetadata?c(null,n,null):B(n,"load loadedmetadata error",c)}),{off:function(){t(n,function(n){return _(n,"load loadedmetadata error",c)})}}}function R(n,t,e){var r=function i(r){e(r),_(n,t,i)};return B(n,t,r),{cancel:function(){_(n,t,r)}}}function q(n){B(document,{DOMContentLoaded:n})}function F(n,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n=r(n),n.length)return i=Un({},i,tt),"string"==typeof e&&(e=e.split(/[,\s]+/g)),t(e,function(e){e=new window.CustomEvent(e,i),t(n,function(n){n.dispatchEvent&&n.dispatchEvent(e)})}),n}function V(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return p(n,t?"clientHeight":"offsetHeight")}function J(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return p(n,t?"clientWidth":"offsetWidth")}function U(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{width:J(n,t),height:V(n,t)}}function G(n,t){if(n=a(n)){var e=window.getComputedStyle(n)[t];return e.indexOf("px")===-1?e:parseFloat(e)}}function K(n,t){return o(t,function(n,e){et.indexOf(n)===-1&&"number"==typeof e&&(t[n]+="px")}),i(n,function(n){n.style&&Object.assign(n.style,t)})}function Q(n){return K(n,{visibility:"hidden"})}function $(n,t,e,r){var i=void 0,o=void 0,a=void 0,u=void 0;switch(n){case"x":e[r?12:4]+=t;break;case"y":e[r?13:5]+=t;break;case"z":r&&(e[14]+=t);break;case"rotate":o=Math.cos(t),a=Math.sin(t),e[0]*=o,e[1]+=a,r?(e[4]-=a,e[5]*=o):(e[2]-=a,e[3]*=o);break;case"rotateX":case"rotateY":case"rotateZ":r&&(o=Math.cos(t),a=Math.sin(t),i="rotateX"===n?[5,6,9,10]:"rotateY"===n?[0,8,2,10]:[0,1,4,5],e[i[0]]*=o,e[i[1]]+=a,e[i[2]]-=a,e[i[3]]*=o);break;case"scale":e[0]*=t,e[r?5:3]*=t;break;case"scaleX":e[0]*=t;break;case"scaleY":e[r?5:3]*=t;break;case"scaleZ":r&&(e[10]*=t);break;case"skew":u=Math.tan(t),e[1]+=u,e[r?4:2]+=u;break;case"skewX":e[r?4:2]+=Math.tan(t);break;case"skewY":e[1]+=Math.tan(t)}}function nn(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:[1,0,0,1,0,0];return o(n,function(n,t){"object"===("undefined"==typeof t?"undefined":Vn(t))?o(t,function(t,i){$(n+t.toUpperCase(),i,r,e)}):$(n,t,r,e)}),t(r,function(n,t){r[t]=+n.toFixed(2)}),r}function tn(n,t){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e?i(n,function(n){n.style[Kn+"transform"]+=" "+t}):K(n,Jn({},Kn+"transform",t))}function en(n,t){return tn(n,"matrix("+t.join(",")+")")}function rn(n,t){return en(n,nn(t,!1))}function on(n,t){return en(n,nn(t))}function an(n,t){return $n?on(n,t):rn(n,t)}function un(n){if(n=a(n),!n)return!1;var t=n.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX}}function cn(n){return n=a(n),!!n&&{top:n.offsetTop,left:n.offsetLeft}}function sn(n){return n.slice(0,1).toUpperCase()+n.slice(1)}function fn(n,t){var e={};return o(n,function(n,t){"object"===("undefined"==typeof t?"undefined":Vn(t))?o(t,function(t,r){e[n+sn(t)]=r}):e[n]=t}),Un({},e,t)}function ln(n,t,e){var r,i=fn(t,{scaleX:1,scaleY:1});return(r=console).log.apply(r,Gn(i)),tn(n,"scale("+i.scaleX+","+i.scaleY+")",e)}function dn(n,t,e){var r=void 0;r="scaleX"in t?t.scaleX:"scale"in t?"x"in t.scale?t.scale.x:t.scale:1;var i=void 0;i="scaleY"in t?t.scaleY:"scale"in t?"y"in t.scale?t.scale.y:t.scale:1;var o=void 0;return o="scaleZ"in t?t.scaleZ:"scale"in t&&"z"in t.scale?t.scale.z:1,tn(n,"scale3d("+r+","+i+","+o+")",e)}function vn(n,t,e){return $n?dn(n,t,e):ln(n,t,e)}function pn(n){return n=a(n),!!n&&n.getBoundingClientRect()}function hn(n,t){return K(n,{height:t})}function gn(n,t,e){return K(n,{width:t,height:e})}function mn(n,t){return K(n,{width:t})}function yn(n){return K(n,{visibility:"visible"})}function wn(n,t,e){var r="x"in t?t.x:0,i="y"in t?t.y:0;return"number"==typeof r&&(r+="px"),"number"==typeof i&&(i+="px"),tn(n,"translate("+r+","+i+")",e)}function bn(n,t,e){var r="x"in t?t.x:0,i="y"in t?t.y:0,o="z"in t?t.z:0;return"number"==typeof r&&(r+="px"),"number"==typeof i&&(i+="px"),"number"==typeof o&&(o+="px"),tn(n,"translate3d("+r+","+i+","+o+")",e)}function xn(n,t,e){return $n?bn(n,t,e):wn(n,t,e)}function kn(n,t){if("skew"in t||"skewX"in t||"skewY"in t||"rotate"in t||"rotateX"in t||"rotateY"in t||"rotateZ"in t)return an(n,t);var e="x"in t||"y"in t||"z"in t;return e?xn(n,t):"scale"in t||"scaleX"in t||"scaleY"in t||"scaleZ"in t?vn(n,t,e):void 0}function Sn(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return isNaN(n)?e:Math.min(Math.max(n,t),e)}function An(n,t){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e,i=void 0,o=function(o){r=!1,n.apply(void 0,Gn(o)),i=setTimeout(function(){r=e},t)},a=function u(){for(var n=arguments.length,e=Array(n),a=0;a<n;a++)e[a]=arguments[a];clearTimeout(i),r?o(e):i=setTimeout(o.bind(null,e),t),u.cancel=function(){clearTimeout(i),r=!0,i=null}};return a}function En(n){var t={};return function(){var e=JSON.stringify(arguments);return e in t||(t[e]=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))),t[e]}}function Ln(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.random()*(n-t)+t}function Cn(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return~~(Math.random()*(n-t+1))+t}function Tn(n,t){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=0,o=void 0,a=function(t){o=null,i=e?window.performance.now():0,n.apply(void 0,Gn(t))},u=function c(){for(var n=arguments.length,u=Array(n),s=0;s<n;s++)u[s]=arguments[s];var f=window.performance.now();i||e||(i=f);var l=t-(f-i);l<0||l>t?a(u):r&&!o&&(o=setTimeout(a.bind(null,u),l)),c.cancel=function(){clearTimeout(o),i=0,o=null}};return u}var On=navigator&&navigator.userAgent.toLowerCase(),Mn=navigator&&navigator.vendor&&navigator.vendor.toLowerCase(),Nn=n("android"),jn=Nn&&!n("mobile"),zn=n("chrome|chromium","google inc"),Pn=n("firefox"),Hn=On.indexOf("msie")!==-1&&+On.split("msie")[1],In=n("iphone|ipad|ipod"),Xn=n("ipad"),Yn=n("iphone"),Bn=n("ipod"),_n=/win/i.test("navigator"in window&&"appVersion"in window.navigator&&window.navigator.appVersion.toLowerCase()||""),Wn=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Zn=In||Nn||_n&&Wn,Dn=n("safari","apple computer"),Rn=_n&&n("phone"),qn=_n&&!Rn&&Wn,Fn=Xn||jn||qn,Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Jn=(function(){function n(n){this.value=n}function t(t){function e(n,t){return new Promise(function(e,i){var u={key:n,arg:t,resolve:e,reject:i,next:null};a?a=a.next=u:(o=a=u,r(n,t))})}function r(e,o){try{var a=t[e](o),u=a.value;u instanceof n?Promise.resolve(u.value).then(function(n){r("next",n)},function(n){r("throw",n)}):i(a.done?"return":"normal",a.value)}catch(c){i("throw",c)}}function i(n,t){switch(n){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}o=o.next,o?r(o.key,o.arg):a=null}var o,a;this._invoke=e,"function"!=typeof t["return"]&&(this["return"]=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(n){return this._invoke("next",n)},t.prototype["throw"]=function(n){return this._invoke("throw",n)},t.prototype["return"]=function(n){return this._invoke("return",n)},{wrap:function(n){return function(){return new t(n.apply(this,arguments))}},await:function(t){return new n(t)}}}(),function(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}),Un=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Gn=function(n){if(Array.isArray(n)){for(var t=0,e=Array(n.length);t<n.length;t++)e[t]=n[t];return e}return Array.from(n)},Kn=([].concat(Gn(window.getComputedStyle(document.documentElement,""))).join("").match(/-(moz|webkit|ms)-/)||""===window.styles.OLink&&["","o"])[1],Qn=Kn+"Transform";document.documentElement.style[Qn]="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)";var $n=!!document.documentElement.style[Qn];document.documentElement.style[Qn]="";var nt=["push","splice","unshift"],tt={bubbles:!0,cancelable:!0},et=["zIndex","z-index","zoom","font-weight","lineHeight","line-height","counterReset","counter-reset","counterIncrement","counter-increment","volume","stress","pitchRange","pitch-range","richness","opacity"],rt={isAndroid:Nn,isAndroidTablet:jn,isChrome:zn,isFirefox:Pn,isIE:Hn,isIOS:In,isIPad:Xn,isIPhone:Yn,isIPod:Bn,isMobile:Zn,isSafari:Dn,isTablet:Fn,isTouchable:Wn,isWindows:_n,isWindowsPhone:Rn,isWindowsTablet:qn,prefix:Kn,support3d:$n,ua:On,vendor:Mn,forEach:t,forElements:i,forIn:o,getElement:a,getElements:r,isDomElement:e,addClass:s,append:v,children:h,clone:g,closest:m,createElement:d,filter:y,find:w,findOne:b,getAttr:x,getData:k,getHtml:S,getProp:p,hasClass:A,indexInParent:E,insertAfter:L,insertBefore:C,next:T,parent:O,prev:M,remove:N,removeAttr:j,removeClass:z,setAttr:l,setData:P,setHtml:I,setProp:H,toggleClass:X,bind:W,drag:drag,hover:Z,load:D,off:_,on:B,once:R,ready:q,trigger:F,getHeight:V,getSize:U,getStyle:G,getWidth:J,hide:Q,matrix:an,matrix2d:rn,matrix3d:on,offset:un,position:cn,scale:vn,scale2d:ln,scale3d:dn,screenPosition:pn,setHeight:hn,setSize:gn,setStyle:K,setWidth:mn,show:yn,transform:kn,translate:xn,translate2d:wn,translate3d:bn,clamp:Sn,debounce:An,memoize:En,randomBetween:Ln,randomIntBetween:Cn,throttle:Tn,getTransformMatrix:nn};return rt});